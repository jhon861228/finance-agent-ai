---
import type { Group } from "../lib/db";

interface Props {
    group: Group;
    username: string;
    index: number;
}

const { group, username, index } = Astro.props;
---

<a href={`/group/${group.groupId}?username=${username}`} class="card-link">
    <div
        class={`premium-card group-card-alt ${index % 2 === 0 ? "gold-border" : "silver-border"}`}
    >
        <div class="card-top">
            <span class="card-title">GROUP ACCESS</span>
            <span class="visa-style">FINANCE</span>
        </div>
        <div class="card-main">
            <h3 class="group-name-card">
                {group.name}
            </h3>
            <div class="card-number-dots">
                {
                    group.members
                        .slice(0, 4)
                        .map(() => <span class="dot">‚óè</span>)
                }
                <span class="num-end">
                    {group.groupId.slice(-4)}
                </span>
            </div>
        </div>
        <div class="card-bottom">
            <div class="card-holder">
                <span class="ch-label">MEMBERS</span>
                <span class="ch-name">
                    {group.members.length} USERS
                </span>
            </div>
            <div class="card-chip">
                <div class="chip-inner"></div>
            </div>
        </div>
    </div>
</a>

<style>
    .card-link {
        text-decoration: none;
        min-width: 280px;
    }

    .group-card-alt {
        padding: 1.5rem;
        height: 180px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 1.5rem;
    }

    .card-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .card-title {
        font-size: 0.6rem;
        color: #888;
        letter-spacing: 0.1em;
    }

    .visa-style {
        font-weight: 800;
        font-style: italic;
        font-size: 0.9rem;
        color: var(--primary);
    }

    .group-name-card {
        font-size: 1.4rem;
        font-family: "Montserrat", sans-serif;
        margin-bottom: 0.2rem;
    }

    .card-number-dots {
        display: flex;
        gap: 8px;
        align-items: center;
        color: #555;
        font-size: 0.8rem;
    }

    .dot {
        letter-spacing: -2px;
    }

    .num-end {
        color: #999;
        margin-left: 10px;
        letter-spacing: 4px;
        font-weight: 600;
    }

    .card-bottom {
        margin-top: auto;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    .ch-label {
        font-size: 0.5rem;
        color: #666;
        display: block;
        margin-bottom: 2px;
    }

    .ch-name {
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    .card-chip {
        width: 32px;
        height: 24px;
        background: #444;
        border-radius: 4px;
        display: flex;
        padding: 4px;
    }

    .chip-inner {
        flex: 1;
        border: 1px solid #666;
        border-radius: 2px;
    }
</style>
